@page "/contact"

@inject NavigationManager Navigation

<PageTitle>Contact</PageTitle>

<h1>Contact Memories and Miles</h1>

<p>Have questions or ready to start planning your trip? Send us a message!</p>

<EditForm Model="form" OnValidSubmit="SendEmail">
    <DataAnnotationsValidator />
    <Field>
        <FieldLabel>Name</FieldLabel>
        <TextEdit @bind-Text="form.Name" />
    </Field>
    <Field>
        <FieldLabel>Email</FieldLabel>
        <TextEdit @bind-Text="form.Email" />
    </Field>
    <Field>
        <FieldLabel>Message</FieldLabel>
        <MemoEdit @bind-Text="form.Message" />
    </Field>
    <Button Color="Color.Primary" Type="ButtonType.Submit">Send Email</Button>
</EditForm>

@code {
    private ContactForm form = new();

    private void SendEmail()
    {
        var subject = Uri.EscapeDataString($"Travel Inquiry from {form.Name}");
        var body = Uri.EscapeDataString($"{form.Message}\n\nContact: {form.Email}");
        var mailto = $"mailto:laura@whitneyworldtravel.com?subject={subject}&body={body}";
        Navigation.NavigateTo(mailto, forceLoad: true);
    }

    private class ContactForm
    {
        public string? Name { get; set; }
        public string? Email { get; set; }
        public string? Message { get; set; }
    }
}
